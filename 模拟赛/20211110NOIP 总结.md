# 20211110NOIP 总结

### 无力的小丑 diversity

$O(n^3)$的做法比较显然：对于每类都做背包，这部分总共$O(n^2)$，对于两个背包的合并，要$O(n^2)$，合并$n$次，所以$O(n^3)$。

但是这个分析似乎是错的，均摊下来是$O(n^2)$，还不理解，但是过了。

### 悲哀的人们 dream

首先写个暴力找性质，发现当长度确定时，选择的数是连续的一段，于是二分答案即可，对于计算每种形况下的答案，写好看一点就是$O(n)$的了，总共$O(n\log n)$。

### 可怜的木偶

这个题的期望比较假，实际上是计数题。以下题面中的$n$记为$N$。

也是写个暴力找性质，发现最小能到达的数就是这$n$个数的$gcd$，然后就是莫比乌斯版题了，写在这里巩固一下。

设$f(n)$表示$gcd$恰好为$n$的方案数，$g(n)$表示$gcd$是$n$的倍数的方案数，显然有关系式$g(n)=\sum_{n|d}f(d)$，那么莫比乌斯反演一下就是$f(n)=\sum_{n|d}\mu(\frac{d}{n})g(d)$。

$g(n)$很好算，$g(n)=\lfloor \frac{k}{n} \rfloor ^N$，那么在$O(n\ln n)$的复杂度内就可以计算所有的$f$了。

当然还可以优化，把整个式子写出来如下：
$$
\sum_{i=1}^{k}\sum_{j=1}^{\lfloor\frac{k}{i} \rfloor} i\mu(j) \lfloor\frac{k}{ij} \rfloor
$$
分离一些$i$，记$F(t)=\sum_{i=1}^{t}\mu(i)\lfloor\frac{t}{i} \rfloor$，那么原式如下：
$$
\sum_{i=1}^{k}iF(\lfloor\frac{k}{i}\rfloor)
$$
对于$F(t)$，这个函数是可以数论分块的。对于原式，显然也可以数论分块，于是就能跑的更快了。

### 可笑的wenhao801 flame

看了一眼就想到做法了。

令点对的贡献在较高点出计算，同高度就在后插入线段树的点计算。

那么把点按$y$从小到大排序，依次插入线段树；同时进行查询，能够到达的点的$x$在一个范围内，可以用二分+RMQ计算。

贡献形式十分套路，只需要维护一次方和、二次方和、点的数量即可。

没有什么难度，就是一道DS题。