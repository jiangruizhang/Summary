# 20211204省选 总结

### 书堆

结论推错了，以为在二维平面上，对于质量均匀的物体，铅垂线是平分面积的，导致规律没有找出来。下面是正解：

首先有一个计算重心位置的结论：两个物体合并后，新物体的重心在原来两个重心连成的线段上，且到重心的距离与重力成反比。

证明：

找到新物体的两条铅垂线即可，铅垂线是两个重心连成的线，那么显然是平衡状态，故重心在原来两个重心连成的线段上。

又知道另一条铅垂线悬挂这新的重心时，新物体处于平衡状态，不妨把这个看作是一个杠杆，按平衡条件分配长度即可。

在这道题中，不妨建立平面直角坐标系，每次添加一个物体到下方，就让原来的重心落在边界上，深处的长度就是每次重心的位移量，可以发现，答案就是$\frac{H_nm}{2}$，其中$H_n$是调和级数。

![书堆](https://github.com/jiangruizhang/Summary/blob/main/%E6%A8%A1%E6%8B%9F%E8%B5%9B/20211204%E4%B9%A6%E5%A0%86.png)

### 大灾变

一道比较简单的题目，但是考试的时候都错题了，以为瞭望塔只能建在山顶上，导致只有60pts左右。

显然相邻的两个点可以看作一个限制条件，就是能够看到这两个点当且仅当在这两点形成的直线上方，所以把这$n-1$条直线搞出来，然后维护一个下凸包，能够作为观察点的就是凸包内的点，然后线性扫一扫就没了。

![大灾变](https://github.com/jiangruizhang/Summary/blob/main/%E6%A8%A1%E6%8B%9F%E8%B5%9B/20211204%E5%A4%A7%E7%81%BE%E5%8F%98.jpg)

### 单词争霸

看到公平博弈第一想法就是$SG$，但是忘掉了一个很重要的结论：多个公平博弈游戏的组合就是各个游戏$sg$值的异或和。

手握$SG$的结论，这题就比较好做了。

可以建出一棵前缀树，然后用树形DP计算$sg$值。

对于一颗树，下一步操作就是选择树内的一个节点，然后把这个节点到根的路径删掉，这样就会出现许多棵游离的子树，这些子树的$sg$值都是已知的，只有全部异或在一起就是走这一步之后的局面的$sg$值，把$size$个$sg$值求出来之后，只需要求$mex$就能得到这棵树的$sg$值了，根据这个进行树形DP即可。

在计算答案的时候，我们只要用类似的方法计算出选择一个点之后的局面的$sg$，当且仅当选择之后的局面$sg$为0时，这个点可以作为第一步。

对于输出，题解里给了结论，只要从小到大输出即可。

### 数据读取问题

题目大意并没有读很懂，大概就是根没有作用，实际是从根的儿子开始走，读一个数消耗1，修改这个数消耗$y$，然后向下跳，如此循环往复，直到跳到叶子。

题目巧妙的转化了代价的计算，读一个数可以看作是直接跳过去，修改一个数可以看作是沿着树边走一下，代价都是1，所以可以用bfs实现最短路，但是由于直接跳过去比较慢，最多可以让连边达到$O(\frac{n^2}{4})$的级别，所以需要优化这个过程。

发现如果使用bfs须进行重编号，那么直接跳过去的点是连续的一段区间，于是可以使用并查集优化，时间复杂度降为$O(n\alpha)$。
